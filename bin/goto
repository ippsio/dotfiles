#!/bin/bash
readonly FILE=~/.completion_candidates/goto
readonly COLOR="[38;5;170m"
readonly COLOR0="[0m"
readonly TAB="	"
candidates=$(while read line; do
  tags=$(echo "${line}"| awk -F ',' '{ print $1 }')
  select_options=$(echo "${line}"| awk -F ',' '{ print $2 }')
  idx=$(( ${idx:-0} + 1 ))
  printf "${idx} ${COLOR}${tags}${COLOR0}${TAB}${select_options}\n"
done < ${FILE})
select_result=$(echo "${candidates}"| fzf --tabstop=1 --info=inline --prompt="goto " --header="$(home_as_tilde ${FILE})" --ansi --query="#")
result=$(echo "${select_result}"| awk -F "${TAB}" '{ print $2 }')
echo "${result}"
