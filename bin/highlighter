#!/bin/bash

fgbg() {
  [[ "$1" != "-1" ]] && printf '\033[38;5;%dm' "$1";
  [[ "$2" != "-1" ]] && printf '\033[48;5;%dm' "$2";
}

for entity in "$@"; do
  key=$(echo "${entity}"| awk -F '=' '{ printf "%s", $1 }')
  val=$(echo "${entity}"| awk -F '=' '{ printf "%s", $2 }')
  case "${key}" in
    "--type" ) a_type="${val}" ;;
    "--deco" )
      case "${val}" in
        1 ) a_deco=1;;
        2 ) a_deco=2;;
        * ) a_deco=2;;
      esac;;
    * ) [[ -z "${param}" ]] && param="${entity}" ;;
  esac
done

case "${a_type}" in
  "git_hash" ) deco=$(fgbg 223);;
  * ) deco='\033[m';;
esac

case "${a_deco}" in
  1 ) printf '%s' "${deco}" ;;
  2 ) printf '%s%s\033[0m' "${deco}" "${param}" ;;
  * ) printf '%s%s\033[0m' "${deco}" "${param}" ;;
esac

