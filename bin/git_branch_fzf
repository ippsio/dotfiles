#!/bin/bash
( ! is_git_repository ) && echo "Not a git repository. " && exit 1

_ME=$( [ -L $0 ] && basename $(readlink $0) || basename $0)
TAB='	'
GIT_BRANCH_CMD="git branch --sort=-authordate --color=always --format='%(objectname:short)${TAB}%(authordate:format:%Y-%m-%d %H:%M:%S(%a))${TAB}%(authorname)${TAB}%(refname:short)${TAB}%(subject)'"

L1="xxxxxxxxxx${TAB}xxxx-xx-xx xx:xx:xx(XX)${TAB}xxxxxx${TAB}--${TAB}現在の変更を取り消す。"
L2=$(eval "${GIT_BRANCH_CMD} --list develop"$TAB)
L2=$(eval "${GIT_BRANCH_CMD} --all --list develop origin/develop"$TAB)
LIST="${L2}"$'\n'"${L22}"$'\n'

exit
L3=$(eval "${GIT_BRANCH_CMD} --remotes --list origin/develop"$TAB)
L4=$(eval "${GIT_BRANCH_CMD}"$TAB)
LIST="${L1}"$'\n'"${L2}"$'\n'"${L3}"$'\n'"${L4}"

echo "${LIST}" \
  | perl -pe 's/^[ ][ ]//' \
  | awk -F "${TAB}" '
    { printf "%+2s", NR }                   # fzf {1} index no
    { printf "	\033[0m"     }{ printf $1 } # fzf {2} hash
    { printf "	\033[1;32m"  }{ printf $2 } # fzf {3} date
    { printf "	\033[0m"     }{ printf $3 } # fzf {4} authorname
    { printf "	\033[1;34m"  }{ printf $4 } # fzf {5} refname:short
    { printf "	\033[1;35m"  }{ printf $5 } # fzf {6} subject
    { print  "	\033[0m" }' \
  | fzf --ansi --prompt="$_ME > " --no-sort --info=inline --tabstop=4 --delimiter="${TAB}" --nth=1..5 \
  | awk -F "${TAB}" '{ print $5 }'



# [local-branchs only develop]
# [remote-branchs only origin/develop]

# [local-branchs without develop]
# [remote-branchs without origin/develop]


